<div class="modal-content">
    <div class="modal-header popup-title" style="font-size:21px">
        <i class="fa fa-lg fa-cubes"></i>&nbsp;ルール
        <span *ngIf='(actionType)=="edit"'>
            追加
        </span>
        <span *ngIf='(actionType)=="create"'>
            編集
        </span>
        <button 
            type="button" 
            class="close pull-right" 
            aria-label="Close" 
            (click)="bsModalRef.hide()"
        >
            <i class="fa fa-times"></i>
        </button>
    </div>
    <div class="modal-body">
        <form novalidate="novalidate">
            <div class="row">
                <div class="col-xs-5">
                    <div 
                        class="form-group" 
                        [ngClass]="{'has-warning': !nameFlg||!nameNotNull||!uniqueFlg}"
                    >
                        <label 
                            for="name" 
                            [ngClass]="{'text-warning': !nameFlg||!nameNotNull||!uniqueFlg}"
                        >
                            <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                            ルール名：
                        </label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="name"
                            name="name" 
                            [(ngModel)]="name"
                            maxlength="30" 
                            placeholder="英数字のみ"                 
                        />
                    </div>
                    <div class="form-group">
                        <label for="desc">概要：</label>
                        <textarea 
                            class="form-control" 
                            id="desc" 
                            name="desc" 
                            [(ngModel)]="desc" 
                            maxlength="2000"
                        >
                    </textarea>
                    </div>
                </div>
                <!-- インデントによるブロック定義 block_rule_1 -->
                <div class="col-xs-7" *ngIf="(ruleType)=='block_rule_1'">
                    <div 
                        class="form-group" 
                        [ngClass]="{'has-warning': !mrkStrNotNull}"
                    >
                        <label 
                            for="markString" 
                            [ngClass]="{'text-warning': !mrkStrNotNull}"
                        >
                            <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                            基準文字列（ブロック識別子）：
                        </label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="markString"
                            name="markString" 
                            [(ngModel)]="markString" 
                            maxlength="256"
                            placeholder="正規表現で記述可能" 
                            [disabled]="processFlg"
                        />
                    </div>
                    <div 
                        class="form-group" 
                        [ngClass]="{'has-warning': !keyStrNotNull||!keyStrFlg||!keyUnqFlg}" 
                    >
                        <label 
                            for="keyStr" 
                            [ngClass]="{'text-warning': !keyStrNotNull||!keyStrFlg||!keyUnqFlg}"
                        >
                            <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                            ブロック識別子名：
                        </label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="keyStr" 
                            name="keyStr"
                            maxlength="30"
                            [(ngModel)]="keyStr" 
                            placeholder="英数字のみ" 
                            [disabled]="lockFlg"
                        />
                    </div>
                    <div >
                        <input 
                            type="checkbox" 
                            id="isSerial" 
                            name="isSerial"
                            [(ngModel)]="isSerial" 
                            [disabled]="processFlg" 
                        >
                        ブロック識別子に連番を付与
                    </div>  
                </div>
                <!-- 行数によるブロック定義 block_rule_2 -->
                <div class="col-xs-7" *ngIf="(ruleType)=='block_rule_2'" >
                    <div 
                        class="form-group" 
                        [ngClass]="{'has-warning': !mrkStrNotNull}"
                    >
                        <label 
                            for="markString" 
                            [ngClass]="{'text-warning': !mrkStrNotNull}"
                        >
                            <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                            基準文字列（ブロック識別子）：
                        </label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="markString"
                            name="markString" 
                            [(ngModel)]="markString" 
                            maxlength="256"
                            placeholder="正規表現で記述可能"
                            [disabled]="processFlg"
                        >
                    </div>
                    <div 
                        class="form-group" 
                        [ngClass]="{'has-warning': !keyStrNotNull||!keyStrFlg||!keyUnqFlg}"
                    >
                        <label 
                            for="keyStr" 
                            [ngClass]="{'text-warning': !keyStrNotNull||!keyStrFlg||!keyUnqFlg}"
                        >
                            <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                            ブロック識別子名：
                        </label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="keyStr" 
                            name="keyStr" 
                            maxlength="30"
                            [(ngModel)]="keyStr" 
                            placeholder="英数字のみ" 
                            [disabled]="lockFlg"
                        >
                    </div>
                    <div 
                        class="form-group" 
                        [ngClass]="{'has-warning': !lnNubFlg||!sLnNubFlg}" 
                    >
                        <label 
                            for="startLnNum" 
                            [ngClass]="{'text-warning': !lnNubFlg||!sLnNubFlg}"
                        >
                            <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                            基準以下スタート行：
                        </label>
                        <input 
                            type="number" 
                            class="form-control" 
                            id="startLnNum"
                            name="startLnNum" 
                            [(ngModel)]=startLnNum 
                            maxlength="11"
                            value="0" 
                            [disabled]="processFlg"
                        >
                    </div>  
                    <div 
                        class="form-group" 
                        [ngClass]="{'has-warning': !lnNubFlg||!eLnNubFlg}" 
                    >
                        <label 
                            for="endLnNum" 
                            [ngClass]="{'text-warning': !lnNubFlg||!eLnNubFlg}"
                        >
                            <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                            基準以下エンド行：
                        </label>
                        <input 
                            type="number" 
                            class="form-control" 
                            id="endLnNum" 
                            name="endLnNum"
                            [(ngModel)]="endLnNum" 
                            value="0"
                            maxlength="11"  
                            [disabled]="processFlg"
                        >
                    </div>  
                    <div>
                        <input 
                            type="checkbox" 
                            id="isSerial" 
                            name="isSerial"
                            [(ngModel)]="isSerial" 
                            [disabled]="processFlg"
                        >
                            ブロック識別子に連番を付与
                    </div>  
                </div>
                <!-- 指定文字列-指定文字列でのブロック抽出 block_rule_3 -->
                <!-- block识别子和start文字列重复 -->
                <div class="col-xs-7" *ngIf="(ruleType)=='block_rule_3'">
                    <div 
                        class="form-group" 
                        [ngClass]="{'has-warning': !mrkStrNotNull_A}" 
                    >
                        <label
                            for="markString" 
                            [ngClass]="{'text-warning':!mrkStrNotNull_A}"
                        >
                            <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                            スタート文字列：
                        </label>
                        <!-- placeholder="英数字のみ"  -->
                        <input 
                            type="text"
                            class="form-control" 
                            id="markString"
                            name="markString" 
                            [(ngModel)]="markString" 
                            maxlength="256"
                            placeholder="正規表現で記述可能" 
                            [disabled]="processFlg"
                        >
                    </div>  
                    <div 
                        class="form-group" 
                        [ngClass]="{'has-warning': !endMrkNotNull}" 
                    >
                        <label 
                            for="endMrkStr" 
                            [ngClass]="{'text-warning': !endMrkNotNull}">
                            <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                            エンド文字列：
                        </label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="endMrkStr" 
                            name="endMrkStr" 
                            maxlength="256" 
                            [(ngModel)]="endMrkStr"
                            placeholder="正規表現で記述可能" 
                            [disabled]="processFlg"
                        >                
                    </div>
                    <div>
                        <input 
                            type="checkbox" 
                            id="isInclude" 
                            name="isInclude"
                            [(ngModel)]="isInclude" 
                            [disabled]="processFlg"
                        >
                            エンド文字列行を含まない
                    </div>  
                    <div 
                        class="form-group" 
                        [ngClass]="{'has-warning': !extractKeyNotNull}" 
                    >
                        <label 
                            for="extractKey" 
                            [ngClass]="{'text-warning': !extractKeyNotNull}"
                        >
                            <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                            ブロック識別子：
                        </label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="extractKey"
                            name="extractKey" 
                            [(ngModel)]="extractKey" 
                            maxlength="256"
                            placeholder="正規表現で記述可能" 
                            [disabled]="processFlg"
                        >
                    </div>
                    <div 
                        class="form-group" 
                        [ngClass]="{'has-warning': !keyStrNotNull||!keyStrFlg||!keyUnqFlg}" 
                    >
                        <label 
                            for="keyStr" 
                            [ngClass]="{'text-warning': !keyStrNotNull||!keyStrFlg||!keyUnqFlg}"
                        >
                            <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                            ブロック識別子名：
                        </label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="keyStr" 
                            name="keyStr" 
                            maxlength="30"
                            [(ngModel)]="keyStr" 
                            placeholder="英数字のみ" 
                            [disabled]="lockFlg"
                        >
                    </div>  
                    <div >
                        <input 
                            type="checkbox" 
                            id="isSerial" 
                            name="isSerial"
                            [(ngModel)]="isSerial" 
                            [disabled]="processFlg"
                        >
                        ブロック識別子に連番を付与
                    </div>  
                </div>
                <!-- 正規表現を含むブロック抽出 block_rule_4 -->
                <div class="col-xs-7" *ngIf="(ruleType)=='block_rule_4'">
                        <div 
                            class="form-group"
                            [ngClass]="{'has-warning': !mrkStrNotNull}" 
                        >
                            <label 
                                for="markString" 
                                [ngClass]="{'text-warning':!mrkStrNotNull}"
                            >
                                <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                                基準文字列：
                            </label>
                            <input 
                                type="text" 
                                class="form-control" 
                                id="markString"
                                name="markString" 
                                [(ngModel)]="markString"
                                maxlength="256"
                                placeholder="正規表現で記述可能" 
                                [disabled]="processFlg"
                            >
                        </div>
                        <div 
                            class="form-group" 
                            [ngClass]="{'has-warning': !keyStrNotNull||!keyStrFlg||!keyUnqFlg}" 
                        >
                            <label 
                                for="keyStr" 
                                [ngClass]="{'text-warning': !keyStrNotNull||!keyStrFlg||!keyUnqFlg}"
                            >
                                <i class="fa fa-asterisk text-danger" title="必須項目"></i>
                                ブロック識別子名：
                            </label>
                            <input 
                                type="text" 
                                class="form-control" 
                                id="keyStr" 
                                name="keyStr" 
                                maxlength="30"
                                [(ngModel)]="keyStr" 
                                placeholder="英数字のみ" 
                                [disabled]="lockFlg"
                            />
                        </div>  
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='!nameNotNull'>
                        ルール名は必須入力です。
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='nameNotNull&&!nameFlg'>
                        ルール名は半角英数字のみで入力してください。
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='!uniqueFlg'>
                        ルール名は重複しています。
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='!keyUnqFlg'>
                        ブロック識別子は重複しています。
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='!mrkStrNotNull'>
                        基準文字列は必須入力です。
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='!keyStrNotNull'>
                        ブロック識別子名は必須入力です。
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='keyStrNotNull&&!keyStrFlg'>
                        ブロック識別子名は半角英数字のみで入力してください
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='!sLnNubFlg'>
                        基準以下スタート行はからの距離は整数を入力してください。
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='!eLnNubFlg'>
                        基準以下エンド行はからの距離は整数を入力してください。
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='eLnNubFlg&&eLnNubFlg&&!lnNubFlg'>
                        スタート行数はエンド行数より小さい値にしてください。
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='!mrkStrNotNull_A'>
                        スタート文字列は必須入力です。
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='!endMrkNotNull'>
                        エンド文字列は必須入力です。
                    </div>
                    <div class="col-sm-12 text-warning" *ngIf='!extractKeyNotNull'>
                        ブロック識別子名は必須入力です。
                    </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <span *ngIf="delBtn" >
            <button 
                type="button" 
                class="btn btn-danger" 
                (click)="deleteRule()"
            >
                <i class="fa fa-minus-square"></i>&nbsp;削除
            </button>
        </span>
        <button 
            type="button" 
            class="btn btn-primary" 
            (click)="saveRule()"
        >
            <i class="fa fa-check-square-o"></i>&nbsp;保存
        </button>
    </div>
</div>